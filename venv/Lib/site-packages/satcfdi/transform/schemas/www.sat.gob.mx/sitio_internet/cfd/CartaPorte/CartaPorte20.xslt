<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:cartaporte20="http://www.sat.gob.mx/CartaPorte20" version="2.0"><xsl:template match="cartaporte20:CartaPorte"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Version"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TranspInternac"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@EntradaSalidaMerc"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PaisOrigenDestino"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ViaEntradaSalida"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@TotalDistRec"/></xsl:call-template><xsl:for-each select="./cartaporte20:Ubicaciones"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Mercancias"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:FiguraTransporte"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Ubicaciones"><xsl:for-each select="./cartaporte20:Ubicacion"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Ubicacion"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoUbicacion"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@IDUbicacion"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@RFCRemitenteDestinatario"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreRemitenteDestinatario"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumRegIdTrib"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ResidenciaFiscal"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumEstacion"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreEstacion"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NavegacionTrafico"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@FechaHoraSalidaLlegada"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@TipoEstacion"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@DistanciaRecorrida"/></xsl:call-template><xsl:for-each select="./cartaporte20:Domicilio"><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Calle"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumeroExterior"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumeroInterior"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Colonia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Localidad"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Referencia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Municipio"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Estado"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Pais"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@CodigoPostal"/></xsl:call-template></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Mercancias"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoBrutoTotal"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@UnidadPeso"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PesoNetoTotal"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumTotalMercancias"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@CargoPorTasacion"/></xsl:call-template><xsl:for-each select="./cartaporte20:Mercancia"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Autotransporte"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:TransporteMaritimo"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:TransporteAereo"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:TransporteFerroviario"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Mercancia"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@BienesTransp"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ClaveSTCC"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Descripcion"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Cantidad"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@ClaveUnidad"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Unidad"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Dimensiones"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@MaterialPeligroso"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@CveMaterialPeligroso"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Embalaje"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@DescripEmbalaje"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoEnKg"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ValorMercancia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Moneda"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@FraccionArancelaria"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@UUIDComercioExt"/></xsl:call-template><xsl:for-each select="./cartaporte20:Pedimentos"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:GuiasIdentificacion"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:CantidadTransporta"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:DetalleMercancia"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Pedimentos"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Pedimento"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:GuiasIdentificacion"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumeroGuiaIdentificacion"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@DescripGuiaIdentificacion"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoGuiaIdentificacion"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:CantidadTransporta"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Cantidad"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@IDOrigen"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@IDDestino"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@CvesTransporte"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:DetalleMercancia"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@UnidadPesoMerc"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoBruto"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoNeto"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoTara"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPiezas"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:Autotransporte"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PermSCT"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumPermisoSCT"/></xsl:call-template><xsl:for-each select="./cartaporte20:IdentificacionVehicular"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Seguros"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Remolques"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:IdentificacionVehicular"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@ConfigVehicular"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PlacaVM"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@AnioModeloVM"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:Seguros"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@AseguraRespCivil"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PolizaRespCivil"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@AseguraMedAmbiente"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PolizaMedAmbiente"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@AseguraCarga"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PolizaCarga"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PrimaSeguro"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:Remolques"><xsl:for-each select="./cartaporte20:Remolque"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:Remolque"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@SubTipoRem"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Placa"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:TransporteMaritimo"><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@PermSCT"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPermisoSCT"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreAseg"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPolizaSeguro"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoEmbarcacion"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Matricula"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumeroOMI"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@AnioEmbarcacion"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreEmbarc"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NacionalidadEmbarc"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@UnidadesDeArqBruto"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoCarga"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumCertITC"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Eslora"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Manga"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Calado"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@LineaNaviera"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NombreAgenteNaviero"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumAutorizacionNaviero"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumViaje"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumConocEmbarc"/></xsl:call-template><xsl:for-each select="./cartaporte20:Contenedor"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@MatriculaContenedor"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoContenedor"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPrecinto"/></xsl:call-template></xsl:for-each></xsl:template><xsl:template match="cartaporte20:TransporteAereo"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PermSCT"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumPermisoSCT"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@MatriculaAeronave"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreAseg"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPolizaSeguro"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@NumeroGuia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@LugarContrato"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@CodigoTransportista"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@RFCEmbarcador"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumRegIdTribEmbarc"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ResidenciaFiscalEmbarc"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreEmbarcador"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:TransporteFerroviario"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoDeServicio"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoDeTrafico"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreAseg"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumPolizaSeguro"/></xsl:call-template><xsl:for-each select="./cartaporte20:DerechosDePaso"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Carro"><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:DerechosDePaso"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoDerechoDePaso"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@KilometrajePagado"/></xsl:call-template></xsl:template><xsl:template match="cartaporte20:Carro"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoCarro"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@MatriculaCarro"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@GuiaCarro"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@ToneladasNetasCarro"/></xsl:call-template><xsl:for-each select="./cartaporte20:Contenedor "><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoContenedor"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoContenedorVacio"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@PesoNetoMercancia"/></xsl:call-template></xsl:for-each></xsl:template><xsl:template match="cartaporte20:FiguraTransporte"><xsl:for-each select="./cartaporte20:TiposFigura "><xsl:apply-templates select="."/></xsl:for-each></xsl:template><xsl:template match="cartaporte20:TiposFigura"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@TipoFigura"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@RFCFigura"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumLicencia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NombreFigura"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumRegIdTribFigura"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@ResidenciaFiscalFigura"/></xsl:call-template><xsl:for-each select="./cartaporte20:PartesTransporte"><xsl:apply-templates select="."/></xsl:for-each><xsl:for-each select="./cartaporte20:Domicilio "><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Calle"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumeroExterior"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@NumeroInterior"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Colonia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Localidad"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Referencia"/></xsl:call-template><xsl:call-template name="Opcional"><xsl:with-param name="valor" select="./@Municipio"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Estado"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@Pais"/></xsl:call-template><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@CodigoPostal"/></xsl:call-template></xsl:for-each></xsl:template><xsl:template match="cartaporte20:PartesTransporte"><xsl:call-template name="Requerido"><xsl:with-param name="valor" select="./@ParteTransporte"/></xsl:call-template></xsl:template></xsl:stylesheet>